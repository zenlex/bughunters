{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-4b8b38964ecefce7.js","components/Bug.js","components/Ship.js","states/GameOverState.js","states/PlayState.js","states/LevelIntroState.js","states/WelcomeState.js","node_modules/@parcel/runtime-js/lib/runtime-e3e4125dc98d1e90.js","node_modules/@parcel/runtime-js/lib/runtime-3a9095235e6dbf30.js","node_modules/@parcel/runtime-js/lib/runtime-76987861072778a5.js","node_modules/@parcel/runtime-js/lib/runtime-7e22b3c9773e0544.js","bughunters.js","components/Game.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cCaf3\\\":\\\"index.60fc6ed9.js\\\",\\\"7k3Zh\\\":\\\"birdsong.85974d15.mp3\\\",\\\"awBKU\\\":\\\"sprite-bug.6ad922dd.png\\\",\\\"b3s5T\\\":\\\"sprite-butterfly.620c2682.png\\\",\\\"hAolI\\\":\\\"sprite-caterpillar.a55e3569.png\\\"}\"));","export default class Bug{\n  constructor(x, y, rank, file, type){\n    this.x = x;\n    this.y = y;\n    this.rank = rank;\n    this.file = file;\n    this.type = type;\n    this.width = 32;\n    this.height = 24;\n  }\n}","export default class Ship{\n  constructor(x = 0, y = 40){\n    this.x = x;\n    this.y = y;\n    this.width = 60;\n    this.height = 40;\n  }\n}","import LevelIntroState from './LevelIntroState.js';\nexport default class GameOverState{\n  constructor(sprites){\n    this.sprites = sprites;\n  }\n  draw(game, ctx){\n    const canvas = game.canvas;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.font ='48px Brush Script MT';\n    ctx.fillStyle = 'brown';\n    ctx.textBaseline = 'center';\n    ctx.textAlign = 'center';\n    ctx.fillText('GAME OVER', game.width / 2, game.height / 2 - 200);\n    ctx.font = '36px Brush Script MT';\n    ctx.fillText('Press \"Space\" to Play Again', game.width / 2, game.height / 2 - 150);\n  }\n\n  keyDown(game, keycode){\n    if(keycode === 'Space'){\n      game.pressedKeys[keycode] = true;\n      game.lives = 3;\n      game.score = 0;\n      game.level = 1;\n      game.moveToState(new LevelIntroState(game.level, this.sprites));\n    }\n  }\n}","import Bug from '../components/Bug.js';\nimport Ship from '../components/Ship.js';\nimport LevelIntroState from './LevelIntroState.js';\nimport GameOverState from './GameOverState.js';\n\nexport default class PlayState{\n  constructor(config, level, sprites){\n    this.config = config;\n    this.level = level;\n\n    //adjust speeds based on level\n    const levelMultiplier = 1 + this.level * this.config.levelDifficultyMultiplier;\n    this.shipSpeed = this.config.shipSpeed;\n    this.bugInitialVelocity = this.config.bugInitialVelocity * levelMultiplier;\n    this.bombRate = this.config.bombRate * levelMultiplier;\n    this.bombMinVelocity = this.config.bombMinVelocity * levelMultiplier;\n    this.bugVelocity = this.config.bugInitialVelocity;\n\n    //store refs for game entities\n    this.bugs = [];\n    this.ship = null;\n    this.sprites = sprites;\n    console.log('Playstate sprites:', this.sprites);\n  }\n\n  enter(game){\n    //init the bugs\n    this.ship = new Ship(this.config.gameWidth / 2, game.gameBounds.bottom);\n    const ranks = this.config.bugRanks;\n    const files = this.config.bugFiles;\n    const bugs = [];\n    for(let rank = 0; rank < ranks; ++rank){\n      for(let file = 0; file < files; ++file){\n        bugs.push(new Bug((this.config.gameWidth / 2) + ((files / 2 - file) * 500 / files), game.gameBounds.top + 20 + rank * 40, rank, file,'Bug'));\n      }\n    }\n    this.bugCurrentVelocity = {x: -this.bugVelocity, y: 0};\n    this.bugNextVelocity = null;\n    this.bugsAreDropping = false;\n    this.bugCurrentDropDistance = 0;\n    this.bugs = bugs; \n  }\n\n  update(game, dt){\n    //move ship\n    if(game.pressedKeys['ArrowLeft']){\n      this.ship.x -= this.shipSpeed * dt;\n    }\n    if(game.pressedKeys['ArrowRight']){\n      this.ship.x += this.shipSpeed * dt;\n    }\n    if(game.pressedKeys['Space']){\n      this.fireMissile();\n    }\n    //ship boundary check\n    if(this.ship.x < game.gameBounds.left) {\n      this.ship.x = game.gameBounds.left;\n    }\n    if(this.ship.x > game.gameBounds.right) {\n      this.ship.x = game.gameBounds.right;\n    }\n    \n    //move bugs\n    let hitLeft = false, hitRight = false, hitBottom = false;\n    for(let i = 0; i < this.bugs.length; ++i){\n      const bug = this.bugs[i];\n      const newx = bug.x + this.bugCurrentVelocity.x * dt;\n      const newy = bug.y + this.bugCurrentVelocity.y * dt;\n      if(hitLeft === false && newx - (bug.width / 2)< game.gameBounds.left){\n        hitLeft = true;\n      }\n      else if(hitRight === false && newx + (bug.width / 2) > game.gameBounds.right) {\n        hitRight = true;\n      }\n      else if(hitBottom === false && newy > game.gameBounds.bottom - bug.height) {\n        hitBottom = true;\n      }\n\n      if(!hitLeft && !hitRight && !hitBottom){\n        bug.x = newx;\n        bug.y = newy;\n      }\n    }\n    \n    //update bug velocities\n    if (this.bugsAreDropping) {\n      this.bugCurrentDropDistance += this.bugCurrentVelocity.y * dt;\n      if(this.bugCurrentDropDistance > this.config.bugDropDistance){\n        this.bugsAreDropping = false;\n        this.bugCurrentVelocity = this.bugNextVelocity;\n        this.bugCurrentDropDistance = 0;\n      }\n    }\n    \n    //if hit left edge - move down, right\n    if(hitLeft) {\n      this.bugVelocity += this.config.bugAcceleration;\n      this.bugCurrentVelocity = {x: 0, y: this.bugVelocity};\n      this.bugsAreDropping = true;\n      this.bugNextVelocity = {x: this.bugVelocity, y: 0};\n    }\n\n    //if hit right edge - move down, left\n    if(hitRight) {\n      this.bugVelocity += this.config.bugAcceleration;\n      this.bugCurrentVelocity={x: 0, y: this.bugVelocity}; \n      this.bugsAreDropping = true;\n      this.bugNextVelocity = {x: -this.bugVelocity, y: 0};\n    }\n\n    if(hitBottom){\n      game.lives = 0;\n    }\n\n    //TODO - implement bomb movement\n\n    //TODO - implement missile movement\n\n    //TODO - collision detection between missles/bugs\n    //TODO - collision detection between bugs / ship\n    //TODO - collision detection between bombs / ship\n\n    //failure condition\n    if(game.lives <= 0){\n      game.moveToState(new GameOverState());\n    }\n\n    //victory condition\n    if(this.bugs.length === 0) {\n      game.score += this.level * 50;\n      game.level += 1;\n      game.moveToState(new LevelIntroState(game.level));\n    }\n  }\n\n  fireMissile(){\n    //TODO - implement fireMissile;\n    console.log('Pew Pew------>');\n  }\n\n  draw(game, ctx){\n    //clear canvas\n    ctx.clearRect(0, 0, game.width, game.height);\n    \n    //draw ship\n    ctx.fillStyle = '#999999';\n    ctx.drawImage(this.sprites.shipSprite, this.ship.x - (this.ship.width / 2), this.ship.y - this.ship.height, this.ship.width, this.ship.height);\n\n    //draw bugs\n    for(let i = 0; i < this.bugs.length; ++i){\n      const bug = this.bugs[i];\n      ctx.drawImage(this.sprites.bugSprite, bug.x - bug.width / 2, bug.y - bug.height / 2, bug.width, bug.height);\n    }\n    //draw missiles\n\n    //draw bombs\n  }\n  \n}","import PlayState from './PlayState.js';\nexport default class LevelIntroState{\n  constructor(level, sprites){\n    this.level = level;\n    this.countdownmessage = 3;\n  \n    this.sprites = sprites;\n    console.log('introstate sprites', this.sprites);\n  }\n\n  draw(game, ctx){\n    ctx.clearRect(0, 0, game.width, game.height);\n    ctx.font = '48px Brush Script MT';\n    ctx.fillStyle = 'brown';\n    ctx.textBaseline = 'center';\n    ctx.textAlign = 'center';\n    ctx.fillText(`Level ${this.level}`, game.width / 2, game.height / 2 - 200);\n    ctx.font = '36px Brush Script MT';\n    ctx.fillText(`Ready in ${this.countdownmessage}`, game.width / 2, game.height / 2 - 150 );\n  }\n\n  update(game, dt){\n    if(!this.countdown) this.countdown = 3;\n    this.countdown -=dt ;\n    if(this.countdown < 2) this.countdownmessage = 2;\n\n    if(this.countdown < 1) this.countdownmessage = 1;\n\n    if(this.countdown <= 0) game.moveToState(new PlayState(game.config, this.level, this.sprites));\n\n  }\n}","import LevelIntroState from './LevelIntroState.js';\n\nexport default class WelcomeState{\n  constructor(sprites){\n    this.sprites = sprites;\n    console.log('WelcomState Sprites:', this.sprites);\n  }\n\n  draw(game, ctx){\n    const canvas = game.canvas;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.font ='64px Brush Script MT';\n    ctx.fillStyle = 'brown';\n    ctx.textBaseline = 'center';\n    ctx.textAlign = 'center';\n    ctx.fillText('Bug Hunters', game.width / 2, game.height / 2 - 200);\n    ctx.font = '32px Brush Script MT';\n    ctx.fillText('Press \"Space\" to Start', game.width / 2, game.height / 2 - 160);\n    ctx.fillText('Use <- and -> to Move and \"Space\" to Shoot', game.width / 2, game.height / 2 - 120);\n  }\n\n  keyDown(game, keycode){\n    if(keycode === 'Space'){\n      game.pressedKeys[keycode] = true;\n      game.moveToState(new LevelIntroState(game.level, this.sprites));\n    }\n  }\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7k3Zh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"awBKU\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"b3s5T\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"hAolI\")).toString();","import Game from './components/Game.js';\nimport AudioURL from 'url:./birdsong.mp3';\nimport bugSpriteImg from './img/sprite-bug.png';\nimport shipSpriteImg from './img/sprite-butterfly.png';\nimport missileSpriteImg from './img/sprite-caterpillar.png';\n\n//TODO reafctor/optimize asset loading \n//TODO get deployment bundle to play nice  with gh-pages/mime types\n\nconst bugSprite = new Image();\nbugSprite.src = bugSpriteImg;\n\nconst shipSprite = new Image();\nshipSprite.src = shipSpriteImg;\n\nconst missileSprite = new Image();\nshipSprite.src = missileSpriteImg;\n\nconst sprites = { bugSprite, shipSprite, missileSprite };\n\nconst canvas = document.querySelector('#gamecanvas');\nconst game = new Game(canvas, null, sprites);\n\ngame.start();\n\n//add control listeners\nwindow.addEventListener('keydown', (e) => {\n  const code = e.code;\n  if (code === 'ArrowLeft' || code === 'ArrowRight' || code === 'Space') {\n    e.preventDefault();\n  }\n  game.keyDown(game, code);\n});\n\nwindow.addEventListener('keyup', (e) => {\n  const code = e.code;\n  game.keyUp(game, code);\n});\n\nconst audio = new Audio(AudioURL);\nlet birdsPlaying = false;\ndocument.onclick = function () {\n  birdsPlaying ? audio.pause() : audio.play();\n};\n\naudio.onplaying = () => {\n  birdsPlaying = true;\n};\n\naudio.onpause = () => {\n  birdsPlaying = false;\n};","import WelcomeState from '../states/WelcomeState.js';\nexport default class Game{\n  constructor(canvas, config, sprites){\n    console.log('game arg sprites', sprites);\n    //state variables\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d'),\n    this.lastTime;\n    this.timeDelta = 0;\n    this.pressedKeys = {};\n    this.stateStack = [];\n    this.level = 1;\n    this.sprites = sprites;\n    console.log('game sprites:', this.sprites);\n    // game settings\n    this.config = config || {\n      bomRate: 0.05,\n      bombMinVelocity: 50,\n      bombMaxVelocity: 50,\n      bugInitialVelocity: 100,\n      bugAcceleration: 0,\n      bugDropDistance: 20,\n      missileVelocity: 120,\n      missileMaxFireRate: 2,\n      score: 0,\n      lives: 3,\n      fps : 50, //game loop speed\n      bugRanks: 5,\n      bugFiles: 10,\n      shipSpeed: 120,\n      levelDifficultyMultiplier: 0.2,\n      pointsPerBug: 5,\n      gameWidth: this.width,\n      gameHeight: this.height,\n    };\n\n    //function binds\n    this.animate = this.animate.bind(this);\n  }\n\n  currentState(){\n    return this.stateStack.length > 0 ? this.stateStack[this.stateStack.length - 1] : null;\n  }\n\n  moveToState(state){\n    if(this.currentState() && this.currentState.leave){\n      this.currentState().leave(this);\n      this.stateStack.pop();\n    }\n\n    if(state.enter){\n      state.enter(this);\n    }\n\n    this.stateStack.pop();\n    this.stateStack.push(state);\n  }\n  \n  pushState(state){\n    if(state.enter){\n      state.enter(this);\n    }\n    this.stateStack.push(state);\n  }\n\n  popState(state){\n    if(state.leave){\n      state.leave(this);\n    }\n    this.stateStack.pop();\n  }\n\n  animate(time){\n    if(this.lastTime){\n      this.timeDelta = (time - this.lastTime) / 1000;\n    } else this.timeDelta = 0;\n    this.lastTime = time;\n    const currentState = this.currentState();\n    if(currentState){\n      if(currentState.update){\n        currentState.update(this, this.timeDelta);\n      }\n      if(currentState.draw){\n        currentState.draw(this, this.ctx);\n      }\n    }\n    window.requestAnimationFrame(this.animate);\n  }\n  \n  init(canvas){\n    this.width = canvas.width;\n    this.height = canvas.height;\n    this.config.gameWidth = canvas.width;\n    this.config.gameHeight = canvas.height;\n    this.gameBounds = {\n      top: 0,\n      right: this.width,\n      bottom: this.height,\n      left: 0\n    };\n    this.score = 0;\n    this.lives = 3;\n    this.lastTime = undefined;\n    this.timeDelta = 0;\n    // this.clearListeners();\n  }\n\n  keyDown(game, keycode){\n    this.pressedKeys[keycode] = true;\n    if(this.currentState() && this.currentState().keyDown){\n      this.currentState().keyDown(game, keycode);\n    }\n  }\n\n  keyUp(game, keycode){\n    delete this.pressedKeys[keycode];\n    if(this.currentState() && this.currentState().keyUp){\n      this.currentState().keyUp(game, keycode);\n    }\n  }\n\n  start(){\n    // this.activateListeners();\n    this.init(this.canvas);\n    this.moveToState(new WelcomeState(this.sprites));\n    this.animate();\n  }\n\n}\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$d438c9f273f360f9$export$2e2bcd8739ae039","constructor","x","y","rank","file","type","this","width","height","$937d20b6099a0c45$export$2e2bcd8739ae039","$ba76d2c8b07b4fe4$export$2e2bcd8739ae039","sprites","draw","game","ctx","canvas","clearRect","font","fillStyle","textBaseline","textAlign","fillText","keyDown","keycode","pressedKeys","lives","score","level","moveToState","$887bef9d7fc48227$export$2e2bcd8739ae039","$a4fc7a545c4504c4$export$2e2bcd8739ae039","config","levelMultiplier","levelDifficultyMultiplier","shipSpeed","bugInitialVelocity","bombRate","bombMinVelocity","bugVelocity","bugs","ship","console","log","enter","gameWidth","gameBounds","bottom","ranks","bugRanks","files","bugFiles","push","top","bugCurrentVelocity","bugNextVelocity","bugsAreDropping","bugCurrentDropDistance","update","dt","fireMissile","left","right","hitLeft","hitRight","hitBottom","bug","newx","newy","bugDropDistance","bugAcceleration","drawImage","shipSprite","bugSprite","countdownmessage","countdown","$b44fb7d29d710c12$export$2e2bcd8739ae039","$f7a23ff9cab33a01$exports","URL","resolve","import","meta","url","toString","$19225cbee50be027$exports","$52b0243072f0154e$exports","$193dc503d19e5f5c$exports","$a912fece9781d465$var$bugSprite","Image","src","$parcel$interopDefault","$a912fece9781d465$var$shipSprite","$a912fece9781d465$var$missileSprite","$a912fece9781d465$var$sprites","$a912fece9781d465$var$canvas","document","querySelector","$a912fece9781d465$var$game","getContext","lastTime","timeDelta","stateStack","bomRate","bombMaxVelocity","missileVelocity","missileMaxFireRate","fps","pointsPerBug","gameHeight","animate","bind","currentState","state","leave","pop","pushState","popState","time","window","requestAnimationFrame","init","undefined","keyUp","start","addEventListener","e","code","preventDefault","$a912fece9781d465$var$audio","Audio","$a912fece9781d465$var$birdsPlaying","onclick","pause","play","onplaying","onpause"],"version":3,"file":"index.60fc6ed9.js.map"}