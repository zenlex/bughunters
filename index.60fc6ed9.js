function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},h={},o=i.parcelRequire58ca;null==o&&((o=function(t){if(t in s)return s[t].exports;if(t in h){var e=h[t];delete h[t];var i={id:t,exports:{}};return s[t]=i,e.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){h[t]=e},i.parcelRequire58ca=o),o.register("27Lyk",(function(e,i){var s,h;t(e.exports,"register",(()=>s),(t=>s=t)),t(e.exports,"resolve",(()=>h),(t=>h=t));var o={};s=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)o[e[i]]=t[e[i]]},h=function(t){var e=o[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o("27Lyk").register(JSON.parse('{"cCaf3":"index.60fc6ed9.js","7k3Zh":"birdsong.85974d15.mp3","awBKU":"sprite-bug.6ad922dd.png","b3s5T":"sprite-butterfly.620c2682.png","hAolI":"sprite-caterpillar.a55e3569.png"}'));class r{constructor(t,e,i,s,h){this.x=t,this.y=e,this.rank=i,this.file=s,this.type=h,this.width=32,this.height=24}}class n{constructor(t=0,e=40){this.x=t,this.y=e,this.width=60,this.height=40}}class l{constructor(t){this.sprites=t}draw(t,e){const i=t.canvas;e.clearRect(0,0,i.width,i.height),e.font="48px Brush Script MT",e.fillStyle="brown",e.textBaseline="center",e.textAlign="center",e.fillText("GAME OVER",t.width/2,t.height/2-200),e.font="36px Brush Script MT",e.fillText('Press "Space" to Play Again',t.width/2,t.height/2-150)}keyDown(t,e){"Space"===e&&(t.pressedKeys[e]=!0,t.lives=3,t.score=0,t.level=1,t.moveToState(new c(t.level,this.sprites)))}}class a{constructor(t,e,i){this.config=t,this.level=e;const s=1+this.level*this.config.levelDifficultyMultiplier;this.shipSpeed=this.config.shipSpeed,this.bugInitialVelocity=this.config.bugInitialVelocity*s,this.bombRate=this.config.bombRate*s,this.bombMinVelocity=this.config.bombMinVelocity*s,this.bugVelocity=this.config.bugInitialVelocity,this.bugs=[],this.ship=null,this.sprites=i,console.log("Playstate sprites:",this.sprites)}enter(t){this.ship=new n(this.config.gameWidth/2,t.gameBounds.bottom);const e=this.config.bugRanks,i=this.config.bugFiles,s=[];for(let h=0;h<e;++h)for(let e=0;e<i;++e)s.push(new r(this.config.gameWidth/2+500*(i/2-e)/i,t.gameBounds.top+20+40*h,h,e,"Bug"));this.bugCurrentVelocity={x:-this.bugVelocity,y:0},this.bugNextVelocity=null,this.bugsAreDropping=!1,this.bugCurrentDropDistance=0,this.bugs=s}update(t,e){t.pressedKeys.ArrowLeft&&(this.ship.x-=this.shipSpeed*e),t.pressedKeys.ArrowRight&&(this.ship.x+=this.shipSpeed*e),t.pressedKeys.Space&&this.fireMissile(),this.ship.x<t.gameBounds.left&&(this.ship.x=t.gameBounds.left),this.ship.x>t.gameBounds.right&&(this.ship.x=t.gameBounds.right);let i=!1,s=!1,h=!1;for(let o=0;o<this.bugs.length;++o){const r=this.bugs[o],n=r.x+this.bugCurrentVelocity.x*e,l=r.y+this.bugCurrentVelocity.y*e;!1===i&&n-r.width/2<t.gameBounds.left?i=!0:!1===s&&n+r.width/2>t.gameBounds.right?s=!0:!1===h&&l>t.gameBounds.bottom-r.height&&(h=!0),i||s||h||(r.x=n,r.y=l)}this.bugsAreDropping&&(this.bugCurrentDropDistance+=this.bugCurrentVelocity.y*e,this.bugCurrentDropDistance>this.config.bugDropDistance&&(this.bugsAreDropping=!1,this.bugCurrentVelocity=this.bugNextVelocity,this.bugCurrentDropDistance=0)),i&&(this.bugVelocity+=this.config.bugAcceleration,this.bugCurrentVelocity={x:0,y:this.bugVelocity},this.bugsAreDropping=!0,this.bugNextVelocity={x:this.bugVelocity,y:0}),s&&(this.bugVelocity+=this.config.bugAcceleration,this.bugCurrentVelocity={x:0,y:this.bugVelocity},this.bugsAreDropping=!0,this.bugNextVelocity={x:-this.bugVelocity,y:0}),h&&(t.lives=0),t.lives<=0&&t.moveToState(new l),0===this.bugs.length&&(t.score+=50*this.level,t.level+=1,t.moveToState(new c(t.level)))}fireMissile(){console.log("Pew Pew------\x3e")}draw(t,e){e.clearRect(0,0,t.width,t.height),e.fillStyle="#999999",e.drawImage(this.sprites.shipSprite,this.ship.x-this.ship.width/2,this.ship.y-this.ship.height,this.ship.width,this.ship.height);for(let t=0;t<this.bugs.length;++t){const i=this.bugs[t];e.drawImage(this.sprites.bugSprite,i.x-i.width/2,i.y-i.height/2,i.width,i.height)}}}class c{constructor(t,e){this.level=t,this.countdownmessage=3,this.sprites=e,console.log("introstate sprites",this.sprites)}draw(t,e){e.clearRect(0,0,t.width,t.height),e.font="48px Brush Script MT",e.fillStyle="brown",e.textBaseline="center",e.textAlign="center",e.fillText(`Level ${this.level}`,t.width/2,t.height/2-200),e.font="36px Brush Script MT",e.fillText(`Ready in ${this.countdownmessage}`,t.width/2,t.height/2-150)}update(t,e){this.countdown||(this.countdown=3),this.countdown-=e,this.countdown<2&&(this.countdownmessage=2),this.countdown<1&&(this.countdownmessage=1),this.countdown<=0&&t.moveToState(new a(t.config,this.level,this.sprites))}}class g{constructor(t){this.sprites=t,console.log("WelcomState Sprites:",this.sprites)}draw(t,e){const i=t.canvas;e.clearRect(0,0,i.width,i.height),e.font="64px Brush Script MT",e.fillStyle="brown",e.textBaseline="center",e.textAlign="center",e.fillText("Bug Hunters",t.width/2,t.height/2-200),e.font="32px Brush Script MT",e.fillText('Press "Space" to Start',t.width/2,t.height/2-160),e.fillText('Use <- and -> to Move and "Space" to Shoot',t.width/2,t.height/2-120)}keyDown(t,e){"Space"===e&&(t.pressedKeys[e]=!0,t.moveToState(new c(t.level,this.sprites)))}}var u;u=new URL(o("27Lyk").resolve("7k3Zh"),import.meta.url).toString();var p;p=new URL(o("27Lyk").resolve("awBKU"),import.meta.url).toString();var d;d=new URL(o("27Lyk").resolve("b3s5T"),import.meta.url).toString();var w;w=new URL(o("27Lyk").resolve("hAolI"),import.meta.url).toString();const f=new Image;f.src=e(p);const y=new Image;y.src=e(d);const b=new Image;y.src=e(w);const m={bugSprite:f,shipSprite:y,missileSprite:b},S=document.querySelector("#gamecanvas"),v=new class{constructor(t,e,i){console.log("game arg sprites",i),this.canvas=t,this.ctx=t.getContext("2d"),this.lastTime,this.timeDelta=0,this.pressedKeys={},this.stateStack=[],this.level=1,this.sprites=i,console.log("game sprites:",this.sprites),this.config=e||{bomRate:.05,bombMinVelocity:50,bombMaxVelocity:50,bugInitialVelocity:100,bugAcceleration:0,bugDropDistance:20,missileVelocity:120,missileMaxFireRate:2,score:0,lives:3,fps:50,bugRanks:5,bugFiles:10,shipSpeed:120,levelDifficultyMultiplier:.2,pointsPerBug:5,gameWidth:this.width,gameHeight:this.height},this.animate=this.animate.bind(this)}currentState(){return this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null}moveToState(t){this.currentState()&&this.currentState.leave&&(this.currentState().leave(this),this.stateStack.pop()),t.enter&&t.enter(this),this.stateStack.pop(),this.stateStack.push(t)}pushState(t){t.enter&&t.enter(this),this.stateStack.push(t)}popState(t){t.leave&&t.leave(this),this.stateStack.pop()}animate(t){this.lastTime?this.timeDelta=(t-this.lastTime)/1e3:this.timeDelta=0,this.lastTime=t;const e=this.currentState();e&&(e.update&&e.update(this,this.timeDelta),e.draw&&e.draw(this,this.ctx)),window.requestAnimationFrame(this.animate)}init(t){this.width=t.width,this.height=t.height,this.config.gameWidth=t.width,this.config.gameHeight=t.height,this.gameBounds={top:0,right:this.width,bottom:this.height,left:0},this.score=0,this.lives=3,this.lastTime=void 0,this.timeDelta=0}keyDown(t,e){this.pressedKeys[e]=!0,this.currentState()&&this.currentState().keyDown&&this.currentState().keyDown(t,e)}keyUp(t,e){delete this.pressedKeys[e],this.currentState()&&this.currentState().keyUp&&this.currentState().keyUp(t,e)}start(){this.init(this.canvas),this.moveToState(new g(this.sprites)),this.animate()}}(S,null,m);v.start(),window.addEventListener("keydown",(t=>{const e=t.code;"ArrowLeft"!==e&&"ArrowRight"!==e&&"Space"!==e||t.preventDefault(),v.keyDown(v,e)})),window.addEventListener("keyup",(t=>{const e=t.code;v.keyUp(v,e)}));const x=new Audio(e(u));let k=!1;document.onclick=function(){k?x.pause():x.play()},x.onplaying=()=>{k=!0},x.onpause=()=>{k=!1};
//# sourceMappingURL=index.60fc6ed9.js.map
